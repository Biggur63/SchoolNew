<!-- TEST-PARTIAL-COURSE-CARD -->

{{/* BEGIN: sanity check */}}
{{- $p := . -}}
{{- if not $p -}}
  {{- return -}}
{{- end -}}
{{/* END: sanity check */}}

<article class="bg-white rounded shadow overflow-hidden">

  {{/* IMAGE LOGIC */}}
  {{- $img := "" -}}

  {{- with $p.Resources.GetMatch "thumb*" }}
    {{- $img = .RelPermalink -}}
  {{- else if $p.Params.thumb }}
    {{- $img = $p.Params.thumb -}}
  {{- else if $p.Params.image }}
    {{- $img = $p.Params.image -}}
  {{- else if $p.Params.bg_image }}
    {{- $img = $p.Params.bg_image -}}
  {{- end }}

  {{- if $img }}
    <a href="{{ $p.RelPermalink }}">
      <img src="{{ $img }}" alt="{{ $p.Title }}" class="w-full h-44 object-cover">
    </a>
  {{- else }}
    <a href="{{ $p.RelPermalink }}">
      <div class="w-full h-44 bg-gray-100 flex items-center justify-center text-gray-400">
        Нет изображения
      </div>
    </a>
  {{- end }}

  <div class="p-4">

    <h3 class="text-lg font-semibold mb-1">
      <a href="{{ $p.RelPermalink }}" class="hover:underline">{{ $p.Title }}</a>
    </h3>

    {{- with $p.Params.summary }}
      <p class="text-sm text-gray-600 mb-2">{{ . }}</p>
    {{- end }}

    {{- with $p.Params.duration }}
      <p class="text-xs text-gray-500">Длительность: {{ . }}</p>
    {{- end }}

  </div>

</article>
