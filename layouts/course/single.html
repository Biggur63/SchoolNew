{{ define "main" }}

<div class="container mx-auto px-4 py-8">

  <a href="{{ "/courses/" | relURL }}" class="inline-block text-sm mb-4 hover:underline">&larr; Все курсы</a>

  <h1 class="text-3xl font-bold mb-4">{{ .Title }}</h1>

  <div class="prose max-w-none mb-8">
    {{ .Content }}
  </div>

  <h2 class="text-2xl font-semibold mb-4">Модули курса</h2>

  {{ $root := . }}
  {{ $modules := slice }}

  {{ range .Params.modules }}
    {{ $slug := . }}
    {{ $p := $root.GetPage $slug }}
    {{ if $p }}
      {{ $modules = $modules | append $p }}
    {{ end }}
  {{ end }}

  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {{ range $modules }}
      <div class="p-4 rounded border shadow">
        <h3 class="font-semibold text-xl mb-2">
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        </h3>
        <p>{{ .Params.summary }}</p>
      </div>
    {{ end }}
  </div>

</div>

{{ end }}
